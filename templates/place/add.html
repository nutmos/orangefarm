{% load static %}
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Edit Profile</title>
    <script src="https://unpkg.com/react@15.3.2/dist/react.js"></script>
    <script src="https://unpkg.com/react-dom@15.3.2/dist/react-dom.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/babel-core/5.8.34/browser.min.js"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/foundation/6.2.4/foundation.min.css">
    <link rel="stylesheet" href={% static "css/styles.css" %}>
    <link rel="stylesheet" href={% static "css/user_profile/styles.css" %}>
</head>
<body>
    <div id="navbar"></div>
    <div class="row" style="margin-top: 2em; margin-bottom: 2em;">
    <div class="large-6 columns small-centered">
    <div class="row">
        <form action="/place/process-add" method="get">
            <label for="">Name
                <input id="name" type="text" name="name" placeholder="name">
            </label>
            <label for="">Description
                <input name="description" id="description" type="text" placeholder="Description">
            </label>
            <label for="">Country
                <select id="country-list" name="country-list" onchange="updateCity()">
                    <option value="">Select Country</option>
                    {% for i in country_list %}
                    <option value="{{ i.id }}">{{ i.name }}</option>
                    {% endfor %}
                </select>
            </label>
            <label for="">City
                <select id="city-list" name="city-list">
                    <option value="">Select City</option>
                </select>
            </label>
            <div class="footer text-centered">
                <input class="button" type="submit" value="Save Change">
            </div>
        </form>
    </div>
    </div>
    </div>
    <div id="footer-bar"></div>
</body>
<script>
var data = { user_id: "{{ request.session.user_id }}",
logo: "{% static 'logo/orange-farm-logo-white-transparent.png' %}"
};

function updateCity() {
    var e = document.getElementById("country-list");
    var country_id = e.options[e.selectedIndex].value;
    if (country_id === "") {
        var city_e = document.getElementById("city-list");
        city_e.innerHTML = "";
        var opt1 = document.createElement('option');
        opt1.value = "";
        opt1.text = "Select City";
        city_e.appendChild(opt1);
        return;
    }
    var getUrl = "/city/get-city-by-country?country_id=".concat(country_id);
    var xmlHttp = new XMLHttpRequest();
    xmlHttp.open( "GET", getUrl, false ); // false for synchronous request
    xmlHttp.send();
    var jsonObject = xmlHttp.responseText;
    var obj = JSON.parse(jsonObject);
    var city_e = document.getElementById("city-list");
    city_e.innerHTML = "";
    var opt1 = document.createElement('option');
    opt1.value = "";
    opt1.text = "Select City";
    city_e.appendChild(opt1);
    for (var key in obj) {
        var op = document.createElement('option');
        op.value = obj[key];
        op.text = key;
        city_e.appendChild(op);
    }
}
//window.alert(userInfo.user_id);
</script>
<script src={% static "js/navbar.js" %} type="text/babel"></script>
<script src={% static "js/footerbar.js" %} type="text/babel"></script>
</html>
